<도메인 모드 간략히>
도메인모드란 중앙 호스트 컨트롤러가 서브 호스트 컨트롤러와 통신하여 관리하는 것.
이 때, 프로세스 컨트롤러가 모든 호스트 컨트롤러의 라이프사이클을 관리함.
(프로세스 컨트롤러는 모든 서버에 각각 떠있음)
(서브 호스트 컨트롤러가 도메인 호스트 컨트롤러의 정보를 받아와 직접 시작하는 것이아님!)
시작과 정지는 프로세스 컨트롤러가 관리한다는 뜻.

핵심 파일인 host.xml은 호스트 컨트롤러의 주체를 정의하고 
interface인 명시적 바인드 주소를 설정.(이후 설정한 interface를 확인하여 domain.xml의 socket
binding group을 참조함)

또 하나의 핵심 파일인 domain.xml에는
호스트 주체의 profile,server-group,deployment,interface,socket-binding-group등
대부분의 설정값을 자세히 기입.

<동작 과정>

1.호스트 컨트롤러 시작시 host.xml에만 포함되어 있는 interface등 호스트 고유 설정을 로드한 후 
호스트가 도메인의 마스터나 슬레이브 중 무엇인지 domain-controller에서 판단한다.
(즉,누구를 먼저 시작하던 일단 host.xml의 domain-controller를 읽어 
마스터인지 슬레이브인지 확인하고 대기 함)

2. 호스트가 마스터인 경우 domain.xml을 로드한 후 슬레이브의 접속을 기다린다.

2_1. 호스트가 슬레이브인 경우 마스터에 접속해 domain.xml파일에 관리되는
도메인 전체의 설정을 받는다.


<도메인 모드에서의 배포>
여러 배포방식이 있지만 cli로 배포하는게 편함.
cli로 들어가서 배포할 경우 특정 디렉토리인 data디렉토리에
배포파일들이 놓여지는데 서브 호스트 컨트롤러가 이러한 정보를 
받아와 서브에도 배포하게함.

<컨트롤러끼리의 통신>
프로세스 컨트롤러와 호스트 컨트롤러는 서로 소켓으로 통신하는데
http://www.opennaru.com/jboss/jboss-eap-socket-binding/
어떤 소켓으로 통신하는지는 잘 모르겠음 ㅠㅠ


<eap 6.4 도메인모드 서버그룹 및 서버 설정>
1. host.xml파일의 주체 설정 및 도메인 컨트롤러 정하기 
host name = " "
<domain-controller>
도메인이면 <local/>
서브 호스트면 <remote host="ip" port="9999" security-realm="ManagementRealm" username="관리자id"/>
원격접속을 위한 ip 설정은 interface에서 하기.

2.관리자 홈페이지 접속하여
서버그룹을 만들고
서버 설정.(포트 오프셋 지정하여 중복방지)

3.테스트


4.앱을 배포할경우 
도메인 컨트롤러 호스트 cli들어가서  deploy 파일경로 
이렇게치면 뒤에 서브그룹 어디로 넣을건지 선택하라함
2번에서 만든 서버그룹 이름 넣고 deploy



















